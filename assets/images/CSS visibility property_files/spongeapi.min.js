var iframeId,iid,handleSetupResponse,testData,spongeapi=spongeapi||{},spongecell=spongecell||{};iid=window.location.search.slice(1),spongeapi.initComplete=!1,spongeapi.onHover=function(e,n,a){var i,t=null;e||(t=n,e=document);var s=200,o=32,p=null,g=null,r=function(e){p=e.pageX,g=e.pageY},l=null,c=null,d=null,m=function(){"undefined"!=typeof p&&null!==p&&"undefined"!=typeof g&&null!==g&&"undefined"!=typeof c&&null!==c&&"undefined"!=typeof d&&null!==d&&Math.abs(p-c)+Math.abs(g-d)<o?(t&&(t(),t=null),e.removeEventListener("mousemove",r),n!==t&&n(),i&&(l=setTimeout(m,i))):(c=p,d=g,l=setTimeout(m,s))},u=function(e){var n=this.globalToLocal(stage.mouseX,stage.mouseY),a=this.nominalBounds.width,i=this.nominalBounds.height;p=n.x>0&&n.x<a?n.x:null,g=n.y>0&&n.y<i?n.y:null};a?(canvas.addEventListener("mouseover",function(e){var n=this.globalToLocal(stage.mouseX,stage.mouseY);c=n.x,d=n.y,canvas.addEventListener("mousemove",u.bind(this),!1),l=setTimeout(m,s)}.bind(e),!1),canvas.addEventListener("mouseout",function(e){canvas.removeEventListener("mousemove",r),p=g=null,clearTimeout(l)})):(e.addEventListener("mouseenter",function(n){c=n.pageX,d=n.pageY,e.addEventListener("mousemove",r),l=setTimeout(m,s)}),e.addEventListener("mouseleave",function(n){e.removeEventListener("mousemove",r),p=g=null,clearTimeout(l)}))};var engageCallback=function(){parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engagement:!0}),"*")};spongeapi._removeAnimation=function(){var e=document.getElementById("expanding-animation");if(e){var n=e.parentNode;n.parentNode.removeChild(n),clearTimeout(spongeapi.expandingTimeout)}},spongeapi._setupOpenCountdown=function(){var e,n,a,i,t,s,o,p;e=2700,o=window.innerHeight,s=window.innerWidth,p=100,document.body.removeEventListener("mouseout",spongeapi._removeAnimation),spongeapi.expandingTimeout=setTimeout(spongeapi.openPanel,e),(120>s||120>o)&&(a=Math.min(s,o),i=(a/120).toFixed(1),t="-ms-transform: scale("+i+","+i+");\n-webkit-transform: scale("+i+","+i+");\ntransform: scale("+i+","+i+");"),document.getElementById("expanding-animation")||(n=document.createElement("div"),n.style.zIndex=p,n.innerHTML='<div id="expanding-animation" style="\nwidth: '+s+"px;\nheight: "+o+'px;\nz-index: 100;">\n<div class="expanding-wrapper" '+(t?"style='"+t+"'":"")+' >\n<div class="round-wrapper">\n<div class="circle one"></div>\n<div class="circle two"></div>\n<div class="circle three"></div>\n<div class="one number"><span>1</span></div>\n<div class="two number"><span>2</span></div>\n<div class="three number"><span>3</span></div>\n</div>\n<div class="expanding-text">Expanding</div>\n</div>\n</div>',document.body.appendChild(n),document.body.addEventListener("mouseout",spongeapi._removeAnimation),n.addEventListener("click",function(){spongeapi._removeAnimation(),spongeapi.openPanel()}))},spongeapi.openPanelOnHover=function(e){spongeapi.onHover(e,spongeapi._setupOpenCountdown)},spongeapi.init=function(e,n,a,i){iid=window.location.search.slice(1),window.spongecell=window.spongecell||{},e.type?(spongeapi.type=e.type,spongeapi.initObj=e.initObj,spongeapi.isDynamic=e.isDynamic,spongeapi.onReady=e.onReady):(spongeapi.type=e,spongeapi.initObj=n,spongeapi.isDynamic=a,spongeapi.onReady=i),window==parent.top?(spongcell={},handleSetupResponse()):parent.postMessage(JSON.stringify({type:"api",topic:"setup",iid:iid,callback:"handleSetupResponse"}),"*")},spongeapi.openScreen=function(e,n){n=n||{},window!=parent.top?n&&n.engagement?parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engage:!0,screen:e,transition:n.transition}),"*"):parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",engage:!1,screen:e,transition:n.transition}),"*"):console.log("openScreen("+e+","+n+")")},spongeapi.openLanding=function(e){var n=e.hasOwnProperty("landingPage")?e.landingPage:e,a=e.trackOnly||!1,i=e.queryParams||"";window!=parent.top?(a||window.open(spongecell.apiData.landingPages[n].url+i,"_blank"),parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",landingPage:spongecell.apiData.landingPages[n]}),"*")):console.log("openLanding("+n+"): "+spongecell.apiData.landingPages[n].url)},spongeapi.openPanel=function(){window!=parent.top&&parent.postMessage(JSON.stringify({iid:iid,topic:"nav",type:"api",panel:{open:!0}}),"*")},spongeapi.getDynamicText=function(e){return spongecell.hasOwnProperty("apiData")?spongecell.apiData.properties[e].text:e},spongeapi.getDynamicImage=function(e){if(spongecell.hasOwnProperty("apiData")){var n=spongecell.apiData.assets[e];if(n)return n.url||n.src}return e},spongeapi.parseEdge=function(){for(var e in spongecell.apiData.properties){var n=spongeapi.initObj.$(e);n&&n.html(spongecell.apiData.properties[e].text)}for(var e in spongecell.apiData.assets)try{var n=spongeapi.initObj.$(e);n&&n.css({"background-image":"url("+spongecell.apiData.assets[e].src+")"})}catch(a){console.log(a)}},spongeapi.parseDynamicCanvasImages=function(){for(var e,n=0;e=lib.properties.manifest[n];n++)spongecell.apiData.assets.hasOwnProperty(e.id)&&(e.crossOrigin="Anonymous",e.src=spongeapi.getDynamicImage(e.id))},spongeapi.parseDynamicCanvasText=function(){for(var e in spongecell.apiData.properties)exportRoot[e]&&(exportRoot[e].txt.text=spongeapi.getDynamicText(e))},spongeapi.parseDynamicClasses=function(){var e;for(var n in spongecell.apiData.properties)if(e=document.getElementsByClassName(n),e.length>0)for(var a=0;a<e.length;a++)e[a].innerHTML=spongeapi.getDynamicText(n);else(e=document.getElementById(n))&&(e.innerHTML=spongeapi.getDynamicText(n));for(var n in spongecell.apiData.assets)if(e=document.getElementsByClassName(n),e.length>0)for(var a=0;a<e.length;a++)e[a].src=spongeapi.getDynamicImage(n),e[a].setAttribute("source",spongeapi.getDynamicImage(n));else(e=document.getElementById(n))&&(e.src=spongeapi.getDynamicImage(n),e.setAttribute("source",spongeapi.getDynamicImage(n)))},handleSetupResponse=function(e){if(!spongeapi.initComplete){switch(spongeapi.onHover(document.body,engageCallback),window.spongecell.apiData=e||{},!spongecell.apiData.assets&&testData&&(spongecell.apiData=testData),spongeapi.type){case"canvas":spongeapi.isDynamic&&spongecell.apiData.assets&&spongeapi.parseDynamicCanvasImages(),spongeapi.initObj.loadManifest(lib.properties.manifest);var n=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;n&&createjs&&(createjs.DisplayObject.prototype.setTransform=function(e,n,a,i,t,s,o,p,g){if(this.x=e||0,this.y=n||0,this.scaleX=null==a?1:a,this.scaleY=null==i?1:i,this.rotation=t||0,this.skewX=s||0,this.skewY=o||0,this.regX=p||0,this.regY=g||0,this.text&&this.getMeasuredLineHeight){var r=this.getMeasuredLineHeight();this.textBaseline="top",r=r>12&&50>r?.3*this.getMeasuredLineHeight():r>49?.2*this.getMeasuredLineHeight():12>=r?.1*this.getMeasuredLineHeight():.2*this.getMeasuredLineHeight(),this.y=Math.floor(this.y+r)}return this});break;case"gwd":spongeapi.initObj.initAd(),spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses();break;case"edge":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseEdge();break;case"custom":spongeapi.isDynamic&&spongecell.apiData.properties&&spongeapi.parseDynamicClasses()}spongeapi.onReady&&spongeapi.onReady()}spongeapi.initComplete=!0},window.addEventListener("message",function(event){var message=event.data;message&&message.callback&&eval(message.callback)(message.data)});